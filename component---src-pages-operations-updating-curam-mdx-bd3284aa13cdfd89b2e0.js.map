{"version":3,"file":"component---src-pages-operations-updating-curam-mdx-bd3284aa13cdfd89b2e0.js","mappings":"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","sources":["webpack://spm-kubernetes/./src/pages/operations/updating_curam.mdx","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/index.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/LastModifiedDate.js","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/last-modified-date.module.scss","webpack://spm-kubernetes/./node_modules/gatsby-theme-carbon/src/templates/Default.js"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/spm-kubernetes/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst Caption = makeShortcode(\"Caption\");\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`One of the benefits of IBM® Cúram Social Program Management (SPM) on Kubernetes is the reduced time required to roll out a new version of your application from development all the way to production.`}</p>\n    <p>{`Depending on the type of change that needs to be made, there are multiple options for rolling out the change. The different options are visualized in figure 1.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"532px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"137.5%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAIAAADuuAg3AAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVQ4y52Ua2/aMBSG8/8/V9o/mPplXatpbbXCqGgZG0OUhmtLCWzcEgiJ7diO4+sUwlbalQr6yoqSKI9yzuvz2urVh/Wrtl3qzsdLY4zW2uwsq/Dp+vzD1/xx8e7G2RsGi2jS9xajkFFu9pRljMGEmDcphSPgScHeAovYH3c/I7emtVQ7SAihlMqsseiyXb54N2we8zgglFFK6HZhjMMwJITEcZzCSinitzhx9yoYY7zuGUDIhdgLJiuPUxhCJKV8I0xwqOSTTdZGa6PSq1aPL7XSRimV+rqGBUNeP4fmTa0VF1wrDUjQGNW7s5Y9upnCsTFGSsl4/OB3W5PG3aLt+PeErHqmQat4euDYRwn1F36AEGqObs9+np0UTy4beRgDnnAEkeM9XNS/HJ4fnlVPZ3DC4nQuLK0EXd5yMslq45JPwO8x+DVY9BbYXbWQagbHjnfvzHvOvMdFQild98wY22jstWBkzBPDMMY7ZiljtNaPMAAgSZLUx1clhMhm4xkMMcbbRpLFyXpRljX4BI5QIOXWMFOBsUBRAkkSPR8SwSIwvsLLTlZ2lhitdXovFWKg0i9/65Sqg0p/caeV3qzfgm6teHrQrrxPqE8p8zxvNpu5rhuEYYSintfJ27lLu1Cw8ygGgguyUhSlVVhS8mBcJuEgq+dfbrNHxCBKQMQhEdHLsx3HdN8zZA2PRiPbth3HgRD+/9EqIeu18fav2xBAd+oiGFGy6/+VMSgzTBnlgglgQciWm5uxTZoLOp2EzoNAyBr6/UIjn6tdVAbfPTCNaYwJJi8KY4QxbjXRdTG4LpIfZas1a+SquY+Fo9vhjTH6tYNTykRI0u1E5VJYLpFq5Q+H8E+RzJb18QAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n          \"srcSet\": [\"/spm-kubernetes/static/93cc873d76386c8a0595ee41a91d1cb5/0eda2/upgrade_flow.webp 288w\", \"/spm-kubernetes/static/93cc873d76386c8a0595ee41a91d1cb5/d122d/upgrade_flow.webp 532w\"],\n          \"sizes\": \"(max-width: 532px) 100vw, 532px\",\n          \"type\": \"image/webp\"\n        }}></source>{`\n          `}<source parentName=\"picture\" {...{\n          \"srcSet\": [\"/spm-kubernetes/static/93cc873d76386c8a0595ee41a91d1cb5/7fc1e/upgrade_flow.png 288w\", \"/spm-kubernetes/static/93cc873d76386c8a0595ee41a91d1cb5/5774b/upgrade_flow.png 532w\"],\n          \"sizes\": \"(max-width: 532px) 100vw, 532px\",\n          \"type\": \"image/png\"\n        }}></source>{`\n          `}<img parentName=\"picture\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"src\": \"/spm-kubernetes/static/93cc873d76386c8a0595ee41a91d1cb5/5774b/upgrade_flow.png\",\n          \"alt\": \"Upgrade Flow\",\n          \"title\": \"Upgrade Flow\",\n          \"loading\": \"lazy\",\n          \"decoding\": \"async\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          }\n        }}></img>{`\n        `}</picture>{`\n    `}</span>\n    <Caption mdxType=\"Caption\">\n      <p><em parentName=\"p\">{`Figure 1:`}</em>{` Upgrade process flow`}</p>\n    </Caption>\n    <p>{`All the application images should be built by a continuous integration environment, tagged appropriately (e.g. combination of product version and a timestamp), and then promoted throughout all the phases.`}</p>\n    <p>{`Updates can be applied using 2 ways: Helm values, or by editing the deployed resources using `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{`.`}</p>\n    <h2>{`Updating with `}<inlineCode parentName=\"h2\">{`kubectl`}</inlineCode></h2>\n    <p>{`You can update a running application by using the following command to switch out an image, Kubernetes takes care of everything else.\nA new pod with the new image is started up, and when it reports as ‘Ready’, it takes over serving traffic.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubectl set image deployment/<deploymentName> <containerName>=<newImage>:<newTag>\n`}</code></pre>\n    <p>{`This process is described in greater detail in `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#updating-a-deployment\"\n      }}>{`Updating a Deployment`}</a>{`.`}</p>\n    <p>{`For example, the following command will issue an instruction to the Kubernetes Master to change the image used by the `}<inlineCode parentName=\"p\">{`apps-producer-rest`}</inlineCode>{` container of a deployment called `}<inlineCode parentName=\"p\">{`myRelease-apps-rest-producer`}</inlineCode>{` to `}<inlineCode parentName=\"p\">{`minikube.local:5000/rest:vNext`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubectl set image deployment/myRelease-apps-rest-producer apps-producer-rest=minikube.local:5000/rest:vNext\n`}</code></pre>\n    <p>{`The status of this change can be monitored using `}<inlineCode parentName=\"p\">{`kubectl get pods --watch`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`kubectl rollout status deployment/myRelease-apps-rest-producer`}</inlineCode></p>\n    <p>{`If the rollout is not successful (for example, becasue of a typo), the last update can be rolled back:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubectl rollout undo deployment/<deploymentName>\n`}</code></pre>\n    <p>{`This is convenient when only a single image needs to be updated, and the changes do not require any database changes (for example, the Universal Access React application would be a good candidate).\nHowever, bulk updates of images or configuration should be handled with Helm.`}</p>\n    <h2>{`Rolling out updates with Helm`}</h2>\n    <p>{`An update using Helm can include configuration changes, as well as a change of Docker® images. Assuming that all images are tagged with the same tag, the upgrade command would look like the following example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`helm upgrade <releasename> <chartName> --reuse-values --set images.tag=vNext\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`helm upgrade`}</inlineCode>{` command keeps all the values used with the original `}<inlineCode parentName=\"p\">{`helm install`}</inlineCode>{` due to the `}<inlineCode parentName=\"p\">{`--reuse-values`}</inlineCode>{` flag, and only changes the `}<inlineCode parentName=\"p\">{`images.tag`}</inlineCode>{` value, so all new images are deployed with the `}<inlineCode parentName=\"p\">{`vNext`}</inlineCode>{` tag.`}</p>\n    <p>{`Like `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{`, if you must reverse any configuration changes applied by the last action, use `}<inlineCode parentName=\"p\">{`helm rollback <releasename>`}</inlineCode>{`.`}</p>\n    <p>{`The full documentation of the `}<inlineCode parentName=\"p\">{`helm upgrade`}</inlineCode>{` command is available on the Helm `}<a parentName=\"p\" {...{\n        \"href\": \"https://helm.sh/docs/helm/helm_upgrade/\"\n      }}>{`Updating a Deployment`}</a>{` page.`}</p>\n    <h2>{`Upgrade with SQL changes`}</h2>\n    <p>{`Both of the scenarios described assume a no-impact, zero-downtime upgrade, that is no changes to the database are required.\nHowever, should the rollout include schema changes, the application must be halted. This must be coordinated together with your IT Operations and DBA teams.`}</p>\n    <p>{`To halt the application for the duration of the upgrade without deleting all Kubernetes objects, the application can be scaled down to 0 pods:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubectl scale --replicas=0 deployment/<deploymentName>\n`}</code></pre>\n    <p>{`After the database upgrade is completed, the new version of application code can be rolled out using the Helm method described in\n`}<a parentName=\"p\" {...{\n        \"href\": \"#rolling-out-updates-with-helm\"\n      }}>{`Rolling out updates with Helm`}</a>{`.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` The `}<inlineCode parentName=\"p\">{`kubectl scale`}</inlineCode>{` command can be used to horizontally `}<a parentName=\"p\" {...{\n          \"href\": \"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#scaling-a-deployment\"\n        }}>{`scale your application`}</a>{`.`}</p>\n    </InlineNotification>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport * as styles from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, theme, tabs = [] }) => (\n  <div\n    className={cx(styles.pageHeader, {\n      [styles.withTabs]: tabs.length,\n      [styles.darkMode]: theme === 'dark',\n    })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={styles.text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"PageHeader-module--bx--text-truncate--end--379mx\";\nexport var bxTextTruncateFront = \"PageHeader-module--bx--text-truncate--front--2QE1Z\";\nexport var pageHeader = \"PageHeader-module--page-header--1JmOE\";\nexport var darkMode = \"PageHeader-module--dark-mode--aV7If\";\nexport var withTabs = \"PageHeader-module--with-tabs--ezlJE\";\nexport var text = \"PageHeader-module--text--J1--B\";","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"EditLink-module--bx--text-truncate--end--27F-D\";\nexport var bxTextTruncateFront = \"EditLink-module--bx--text-truncate--front--2eTgE\";\nexport var link = \"EditLink-module--link--t_pLX\";\nexport var row = \"EditLink-module--row--2vJiZ\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { title, tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav aria-label={title}>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"PageTabs-module--bx--text-truncate--end--36NdM\";\nexport var bxTextTruncateFront = \"PageTabs-module--bx--text-truncate--front--3IxF7\";\nexport var tabsContainer = \"PageTabs-module--tabs-container--18QsR\";\nexport var list = \"PageTabs-module--list--3gLeN\";\nexport var listItem = \"PageTabs-module--list-item--2X02I\";\nexport var link = \"PageTabs-module--link--2anNu\";\nexport var selectedItem = \"PageTabs-module--selected-item--3CjGa\";","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import LastModifiedDate from './LastModifiedDate';\n\nexport default LastModifiedDate;\n","import React from 'react';\nimport { Row, Column } from '../Grid';\nimport * as styles from './last-modified-date.module.scss';\n\nconst LastModifiedDate = ({ date }) => {\n  const options = {\n    day: '2-digit',\n    year: 'numeric',\n    month: 'long',\n  };\n\n  const lastModified = new Date(date);\n\n  return date ? (\n    <Row className={styles.row}>\n      <Column>\n        <div className={styles.text}>\n          Page last updated: {lastModified.toLocaleDateString('en-GB', options)}\n          {/* // https://www-03preprod.ibm.com/support/knowledgecenter/ibm_style/dates-and-times.html */}\n        </div>\n      </Column>\n    </Row>\n  ) : null;\n};\nexport default LastModifiedDate;\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"last-modified-date-module--bx--text-truncate--end--3sLO2\";\nexport var bxTextTruncateFront = \"last-modified-date-module--bx--text-truncate--front--3gAON\";\nexport var text = \"last-modified-date-module--text--1RmBx\";\nexport var row = \"last-modified-date-module--row--Bb0E9\";","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\nimport useMetadata from '../util/hooks/useMetadata';\nimport LastModifiedDate from '../components/LastModifiedDate';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const {\n    tabs,\n    title,\n    theme: frontmatterTheme,\n    description,\n    keywords,\n    date,\n  } = frontmatter;\n\n  const { interiorTheme } = useMetadata();\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  const theme = frontmatterTheme || interiorTheme;\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader\n        title={Title ? <Title /> : title}\n        label=\"label\"\n        tabs={tabs}\n        theme={theme}\n      />\n      {tabs && (\n        <PageTabs\n          title={title}\n          slug={slug}\n          tabs={tabs}\n          currentTab={currentTab}\n        />\n      )}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n        <LastModifiedDate date={date} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n"],"names":["_frontmatter","makeShortcode","name","props","console","warn","Caption","InlineNotification","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent","title","theme","tabs","className","cx","length","id","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","PageTabs","render","this","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","Link","to","React","date","lastModified","Date","toLocaleDateString","day","year","month","pageContext","children","location","Title","frontmatter","titleType","frontmatterTheme","description","keywords","interiorTheme","useMetadata","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils"],"sourceRoot":""}